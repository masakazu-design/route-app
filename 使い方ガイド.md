# 環境整備スケジュール作成システム 使い方ガイド

## アプリのURL

**https://route-app-masakazu.streamlit.app/**

---

## 基本的な使い方

### Step 1: KMLファイルをアップロード

1. 画面左側の「KMLファイルをアップロード」をクリック
2. 現場のKMLファイルを選択

### Step 2: 訪問先を選ぶ

1. アップロード後、地図上にピンが表示される
2. 左側のチェックボックスで訪問したい場所を選択
3. 「全選択」「全解除」ボタンも使える

### Step 3: 日数を設定

1. 「訪問日数」で何日かけて回るか選択（1〜5日）
2. 訪問先が多い場合は日数を増やす

### Step 4: スケジュール作成

1. 「スケジュール作成」ボタンをクリック
2. 最適なルートが自動計算される
3. 各日のタイムテーブルが表示される

---

## 画面の見方

### タイムテーブル

| 表示 | 意味 |
|------|------|
| ★1 | 最初の訪問先（打ち合わせあり） |
| 1, 2, 3... | 訪問順 |
| 到着時刻 | その場所に着く時刻 |
| 出発時刻 | その場所を出る時刻 |
| 滞在時間 | その場所での作業時間 |
| 移動時間 | 前の場所からの移動時間 |

### 警告メッセージ

| メッセージ | 意味 | 対処法 |
|------------|------|--------|
| 🚨 【早朝出発】 | 出発が6時より早い | 訪問先を別の日に移動 |
| 🚨 【帰りが遅い】 | 終了が20時以降 | 訪問先を別の日に移動 |
| ⚠️ 【早めの出発】 | 出発が7時より早い | 訪問先を別の日に移動を検討 |
| ⚠️ 【帰りが遅め】 | 終了が18時以降 | 訪問先を別の日に移動を検討 |
| ⚠️ 【待機時間】 | 60分以上の待機が発生 | 訪問先の調整で改善可能 |

---

## スケジュールの調整方法

### 訪問先を別の日に移動したい

1. 画面下部の「スケジュール手動調整」を開く
2. ドラッグ＆ドロップで訪問先を別の日に移動
3. 「スケジュールを適用」ボタンをクリック

**⚠️ 注意**: 手動調整エリアが空白になった場合は、「最適ルート計算する」ボタンをもう一度押してください。

### 日数を変更したい

1. 左側の「訪問日数」を変更
2. 「スケジュール作成」を再度クリック

---

## 固定されている設定

| 項目 | 時間 |
|------|------|
| 最初の訪問先到着 | 08:00 |
| 打ち合わせ | 10分 |
| 昼食休憩 | 60分（11:30〜13:00の間） |
| きたえるーむ訪問 | 17:00固定 |

---

## 滞在時間の目安

| 場所の種類 | 滞在時間 |
|------------|----------|
| O2本社（業務） | 80分 |
| 藤沢倉庫 | 15分 |
| きたえるーむ | 15分 |
| 事務所 | 10分 |
| 現場 | 10分 |
| 事務所＋現場 | 20分（合計） |

---

## よくある質問

### Q: 朝が早すぎる

A: 訪問先が多すぎます。一部を別の日に移動するか、日数を増やしてください。

### Q: 帰りが遅すぎる

A: 訪問先が多すぎます。一部を別の日に移動するか、日数を増やしてください。

### Q: きたえるーむの訪問時刻が17:00にならない

A: きたえるーむは自動的に17:00に訪問するよう調整されます。待機時間が発生する場合があります。

### Q: 昼食休憩が入らない

A: 訪問スケジュールによっては昼食休憩が自動挿入されない場合があります。移動時間と合わせて休憩時間が確保されています。

### Q: 待機時間が長い

A: O2本社・藤沢倉庫の自動挿入や、きたえるーむ17:00固定の影響で待機時間が発生することがあります。訪問先を調整することで改善できる場合があります。

### Q: 手動調整エリアが空白になった

A: 「最適ルート計算する」ボタンをもう一度押してください。表示が復元されます。

---

## 困ったときは

担当者に連絡してください。
