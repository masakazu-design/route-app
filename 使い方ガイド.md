# 環境整備スケジュール作成システム 使い方ガイド

## アプリのURL

**https://o2-route-scheduler.streamlit.app/**

---

## 基本的な使い方

### Step 1: 訪問先を選択

1. 画面を開くと、Googleマイマップから自動でデータを取得
2. 「1️⃣ 訪問先を選択」セクションにレイヤー別で訪問先が表示される
3. 各レイヤー（施工中工事、O2グループ、発注先）を開いて、訪問したい場所を選択
4. 選択すると「✅ ○件選択 → ○日に分割」と表示される

### Step 2: 日数を設定

1. 左サイドバーの「🗓️ 日程設定」で「確保する日数」を設定
2. 訪問先が多い場合は日数を増やす

### Step 3: 最適ルートを計算

1. 「2️⃣ ルート最適化」セクションの「🚀 最適ルートを計算する」ボタンをクリック
2. 最適なルートが自動計算される
3. 各日のタイムテーブルが表示される

---

## サイドバーの設定

| 設定項目 | 説明 |
|----------|------|
| 確保する日数 | 何日かけて回るか（1〜10日） |
| 帰宅希望時刻を設定 | チェックを入れると希望時刻を指定できる |
| 移動時間設定 | 冬季（12〜3月）は自動で移動時間が長めに計算される |

---

## 画面の見方

### タイムテーブル

| 表示 | 意味 |
|------|------|
| ★1 | 最初の訪問先（打ち合わせあり） |
| 1, 2, 3... | 訪問順 |
| 🍽️ | 昼食休憩 |
| 到着時刻 | その場所に着く時刻 |
| 出発時刻 | その場所を出る時刻 |
| 滞在時間(分) | その場所での作業時間 |
| 移動時間(分) | 前の場所からの移動時間 |
| 待機時間(分) | きたえるーむ17:00到着待ちなどの待ち時間 |

### 警告メッセージ

| メッセージ | 意味 | 対処法 |
|------------|------|--------|
| 🚨 【早朝出発】 | 出発が6時より早い | 訪問先を別の日に移動 |
| 🚨 【帰りが遅い】 | 終了が20時以降 | 訪問先を別の日に移動 |
| 🚨 【帰宅希望時刻超過】 | 設定した希望時刻を超えている | 訪問先を別の日に移動 |
| ⚠️ 【早めの出発】 | 出発が7時より早い | 訪問先を別の日に移動を検討 |
| ⚠️ 【帰りが遅め】 | 終了が18時以降 | 訪問先を別の日に移動を検討 |
| ⚠️ 【待機時間】 | 60分以上の待機が発生 | 訪問先の調整で改善可能 |

---

## スケジュールの手動調整

### 訪問先を別の日に移動したい

1. 計算結果の下にある「🛠️ スケジュール手動調整」を確認
2. ドラッグ＆ドロップで訪問先を別の日に移動
3. 「✅ スケジュールを適用」ボタンをクリック

**⚠️ 注意**: 手動調整エリアが空白になった場合は、「🚀 最適ルートを計算する」ボタンをもう一度押してください。

### 日数を変更したい

1. 左サイドバーの「確保する日数」を変更
2. 「🚀 最適ルートを計算する」を再度クリック

### 自動計算結果に戻したい

1. 「🔄 自動計算結果にリセット」ボタンをクリック

---

## 訪問先の手動追加

マイマップにない訪問先を追加したい場合：

1. 「➕ 訪問先を手動追加」を開く
2. 場所の名前と住所を入力
3. 滞在時間と種別を選択
4. 「🔍 住所を検索して追加」をクリック

---

## ナビリンク

計算結果の下に「📅 ○日目 のナビリンク」があります。

- 各訪問先の「📍 ナビを開く」をクリックするとGoogle Mapsのナビが開く
- 昼食休憩の位置には「🔍 周辺のお店を検索」リンクがある

---

## 固定されている設定

| 項目 | 時間 |
|------|------|
| 最初の訪問先到着 | 08:00 |
| 打ち合わせ | 10分 |
| 昼食休憩 | 60分（11:30〜13:00の間は訪問しない） |
| きたえるーむ訪問 | 17:00固定 |

---

## 滞在時間の目安

| 場所の種類 | 滞在時間 |
|------------|----------|
| O2本社（業務） | 80分 |
| 藤沢倉庫 | 15分 |
| きたえるーむ | 15分 |
| 事務所 | 10分 |
| 現場 | 10分 |
| 事務所・現場 | 20分（合計） |

---

## よくある質問

### Q: 朝が早すぎる

A: 訪問先が多すぎます。一部を別の日に移動するか、日数を増やしてください。

### Q: 帰りが遅すぎる

A: 訪問先が多すぎます。一部を別の日に移動するか、日数を増やしてください。

### Q: きたえるーむの訪問時刻が17:00にならない

A: きたえるーむは自動的に17:00に訪問するよう調整されます。待機時間が発生する場合があります。

### Q: 昼食休憩が入らない

A: 訪問スケジュールによっては昼食休憩が自動挿入されない場合があります。移動時間と合わせて休憩時間が確保されています。

### Q: 待機時間が長い

A: きたえるーむ17:00固定の影響で待機時間が発生することがあります。アドバイスが表示された場合は、きたえるーむを別の日に移動するか、O2本社・藤沢倉庫を追加することで改善できます。

### Q: 手動調整エリアが空白になった

A: 「🚀 最適ルートを計算する」ボタンをもう一度押してください。表示が復元されます。

---

## 困ったときは

担当者に連絡してください。
